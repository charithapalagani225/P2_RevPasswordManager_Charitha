<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<title>Dashboard</title>

<head th:replace="~{layout :: head('Dashboard')}"></head>

<body>
    <div class="app-wrapper">
        <div th:replace="~{layout :: sidebar}" th:with="activePage='dashboard'"></div>
        <div class="main-content">
            <div th:replace="~{layout :: topbar('Dashboard')}" th:with="user=${user}"></div>
            <div class="page-body">
                <div th:replace="~{layout :: flash}"></div>

                <!-- Stats Cards -->
                <div class="stats-grid fade-in">
                    <div class="stat-card">
                        <div class="stat-icon purple">üóùÔ∏è</div>
                        <div>
                            <div class="stat-value" th:text="${totalPasswords}">0</div>
                            <div class="stat-label">Total Items</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon red">üçÉ</div>
                        <div>
                            <div class="stat-value" th:text="${weakCount}">0</div>
                            <div class="stat-label">Weak Factors</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon yellow">üîÅ</div>
                        <div>
                            <div class="stat-value" th:text="${reusedCount}">0</div>
                            <div class="stat-label">Redundancies</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon green">‚òÅÔ∏è</div>
                        <div>
                            <div class="stat-value" th:text="${oldCount}">0</div>
                            <div class="stat-label">Days Aged</div>
                        </div>
                    </div>
                </div>

                <div class="vault-grid fade-in">
                    <!-- Recent Activities Card -->
                    <div class="card" style="grid-column: span 2;">
                        <div class="card-header"
                            style="display: flex; justify-content: space-between; align-items: center;">
                            <h3 class="card-title">ÊúÄËøëÁöÑÊ¥ªÂãï Recent Activity</h3>
                            <a href="/vault" class="btn btn-secondary btn-sm"
                                style="padding: 6px 12px; font-size: 13px;">View Vault</a>
                        </div>

                        <div th:if="${recentEntries.empty}"
                            style="text-align:center;padding:48px;color:var(--text-muted); background: var(--bg-primary); border-radius: var(--radius-sm);">
                            <div style="font-size:48px;margin-bottom:16px; opacity: 0.5;">üåø</div>
                            <p style="font-weight: 500;">Begin securing your digital life.</p>
                            <a href="/vault/add" class="btn btn-primary btn-sm mt-4">Add Your First Credential</a>
                        </div>

                        <div class="table-wrapper" th:unless="${recentEntries.empty}">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Resource</th>
                                        <th>Type</th>
                                        <th>Added On</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="entry : ${recentEntries}">
                                        <td>
                                            <div style="display:flex;align-items:center;gap:12px;">
                                                <div class="vault-card-icon"
                                                    style="width:36px;height:36px;font-size:16px; margin-bottom: 0;">
                                                    üõ°Ô∏è
                                                </div>
                                                <span th:text="${entry.accountName}"
                                                    style="font-weight: 600; color: var(--text-primary);">Account</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span
                                                style="font-size: 11px; font-weight: 700; color: var(--accent-dark); background: var(--accent-soft); padding: 4px 10px; border-radius: 99px; text-transform: uppercase; letter-spacing: 0.5px;"
                                                th:text="${entry.category}">OTHER</span>
                                        </td>
                                        <td style="color: var(--text-muted); font-size: 13px;"
                                            th:text="${entry.createdAt}"></td>
                                        <td style="text-align: right;">
                                            <a th:href="@{/vault/{id}(id=${entry.id})}" class="btn btn-secondary btn-sm"
                                                style="padding: 6px 12px;">Refine</a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Quick Intentions Card -->
                    <div class="card" style="display: flex; flex-direction: column; gap: 20px;">
                        <h3 class="card-title">Quick Actions</h3>
                        <p style="color: var(--text-secondary); font-size: 14px;">Commonly used features for your daily
                            flow.</p>

                        <div style="display: grid; gap: 12px;">
                            <a href="/vault/add" class="btn btn-primary"
                                style="justify-content: flex-start; padding: 14px 20px;">
                                <span style="font-size: 18px;">‚ú®</span> <span>Secure New Data</span>
                            </a>
                            <a href="/generator" class="btn btn-secondary"
                                style="justify-content: flex-start; padding: 14px 20px;">
                                <span style="font-size: 18px;">ü™Ñ</span> <span>Generate Key</span>
                            </a>
                            <a href="/security/audit" class="btn btn-secondary"
                                style="justify-content: flex-start; padding: 14px 20px;">
                                <span style="font-size: 18px;">üõ°Ô∏è</span> <span>Health Audit</span>
                            </a>
                            <a href="/vault/favorites" class="btn btn-secondary"
                                style="justify-content: flex-start; padding: 14px 20px;">
                                <span style="font-size: 18px;">‚≠ê</span> <span>Core Favorites</span>
                            </a>
                        </div>

                        <div th:if="${weakCount > 0 || reusedCount > 0}" class="alert alert-warning"
                            style="margin-top: auto; font-size: 13px; line-height: 1.4;">
                            <p>We've noticed a few potential refinements in your vault.</p>
                            <a href="/security/audit"
                                style="color: var(--warning); text-decoration: underline; font-weight: 700;">Optimize
                                Now</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div th:replace="~{layout :: scripts}"></div>
</body>

</html>