<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Welcome | RevPassManager</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}" />
</head>

<body class="auth-wrapper">
    <div class="auth-card fade-in">
        <div style="text-align: center; margin-bottom: 40px;">
            <div style="width: 64px; height: 64px; background: var(--accent-soft); 
                        border-radius: 20px; display: flex; align-items: center; 
                        justify-content: center; font-size: 32px; margin: 0 auto 16px;">
                ğŸŒ¿
            </div>
            <h1 style="font-family: 'Outfit', sans-serif; font-size: 28px; 
                       color: var(--accent-dark); margin-bottom: 8px;">
                Welcome Back
            </h1>
            <p style="color: var(--text-muted); font-size: 14px;">
                Access your secure digital workspace
            </p>
        </div>

        <div th:if="${loginError}" class="alert alert-danger fade-in">
            <span>ğŸƒ</span> <span th:text="${loginError}"></span>
        </div>
        <div th:if="${logoutMsg}" class="alert alert-success fade-in">
            <span>ğŸŒ¿</span> <span th:text="${logoutMsg}"></span>
        </div>

        <form method="post" th:action="@{/login}" autocomplete="on">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

            <div class="form-group">
                <label class="form-label" for="usernameOrEmail">Identify Your Account</label>
                <input id="usernameOrEmail" name="usernameOrEmail" type="text" class="form-control"
                    placeholder="Username or email address" autofocus autocomplete="username" required />
            </div>

            <div class="form-group">
                <label class="form-label" for="masterPassword">Digital Key</label>
                <div style="position: relative;">
                    <input id="masterPassword" name="masterPassword" type="password" class="form-control"
                        placeholder="Entrust your master password" autocomplete="current-password" required
                        style="padding-right: 48px;" />
                    <button type="button" class="toggle-pw" style="position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
                                   background: none; border: none; padding: 8px; cursor: pointer;">
                        ğŸ‘ï¸
                    </button>
                </div>
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%; height: 50px; font-size: 16px;">
                <span>ğŸ—ï¸</span> Enter the Vault
            </button>
        </form>

        <div style="margin-top: 32px; text-align: center; border-top: 1px solid var(--border); padding-top: 24px;">
            <div style="display: flex; flex-direction: column; gap: 12px;">
                <a href="/recover"
                    style="color: var(--accent); text-decoration: none; font-size: 13px; font-weight: 500;">
                    Misplaced your digital key?
                </a>
                <div style="font-size: 13px; color: var(--text-muted);">
                    New to RevPass?
                    <a href="/register" style="color: var(--accent-dark); text-decoration: none; font-weight: 600;">
                        Begin your journey
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.querySelectorAll('.toggle-pw').forEach(btn => {
            btn.addEventListener('click', () => {
                const input = document.getElementById('masterPassword');
                input.type = input.type === 'password' ? 'text' : 'password';
                btn.innerHTML = input.type === 'password' ?
                    '<span style="opacity: 0.5;">ğŸ‘ï¸</span>' :
                    '<span style="opacity: 0.5;">ğŸ™ˆ</span>';
            });
        });
    </script>
</body>

</html>